"use strict";Polymer({is:"semapps-map-gv",properties:{route:{type:Object,observer:"_routeChanged"},pins:{type:Array,value:[]},pinsRegistry:{type:Object,value:{}}},attached:function(){var i=this;this.ready=!1,this.$gvMap=document.getElementById("semapps-map-gv");var e=this.$gvMap.querySelectorAll("svg > g");this.listSelection=[],this.listFillers=[],this.legendList=e[14].children,e.forEach(function(e){if("Lingerie"==e.id){var t=e.querySelector("[id='Selection_9_'] polygon"),s=e.querySelector("[id='Fill_9_'] polygon");t&&""!=t&&s&&""!=s&&(i.listSelection.push($(t)),i.listFillers.push($(s)))}else if("Cour_de_la_Chapelle_1_"==e.id){var l=e.querySelector("[id='Selection_2_'] > g path"),n=e.querySelector("[id='Fill_2_'] > g path");l&&""!=l&&n&&""!=n&&(i.listSelection.push($(l)),i.listFillers.push($(n)))}else{var h=e.querySelector("[id^='Selection_'] path"),o=e.querySelector("[id^='Fill_'] path");h&&""!=h&&o&&""!=o&&(i.listSelection.push($(h)),i.listFillers.push($(o)))}}),console.log("this.listSelection :",this.listSelection),console.log("this.listFillers :",this.listFillers),this.hoverActive=!0,semapps.schema=this,SemAppsCarto.ready(this.start.bind(this))},start:function(){var i=this,e=[];$.each(semapps.buildings,function(i){e.push(i)}),this.pins=e;var t=0;for(var s in this.listSelection)!function(e){var s=i.listFillers[t];i.listSelection[e].on("mouseover",function(e){console.log("Passing on : ",s),i.hoverActive&&i.buildingHighlight(s[0])}).on("mouseout",function(e){i.hoverActive&&i.buildingHighlightOff(s[0])}).on("click",function(e){i.hoverActive=!1}),t++}(s)},buildingHighlight:function(i){this.buildingHighlightOff(),this.mapIsOver=!0,this.buildingHighlighted=i;var e=this.buildingHighlighted;e?(console.log("zone :",e),e.classList.add("strong"),e.classList.remove("discreet"),this.buildingHideAll(!0)):this.buildingHideAll(!1)},buildingHighlightOff:function(){var i=this;this.buildingHighlighted&&(this.buildingHighlighted.classList.remove("strong"),delete this.buildingHighlighted),this.mapTimeout&&clearTimeout(this.mapTimeout),this.mapIsOver=!1,this.mapTimeout=setTimeout(function(){i.mapIsOver||i.buildingHighlightReset()},500)},buildingHighlightReset:function(){this.mapTimeout=!1,this.buildingHideAll(!1)},buildingHideAll:function(i){},buildingClick:function(i){semapps.domSearchTextInput.value="",semapps.schema.buildingSelect(i)},buildingSelect:function(i,e){this.pinsRegistry[semapps.buildingSelected]&&this.pinsRegistry[semapps.buildingSelected].deselect();var t=semapps.buildingSelected=i||semapps.buildingSelectedAll;this.pinsRegistry[t]&&this.pinsRegistry[t].select(),!1!==e&&semapps.goSearch()},pinShow:function(i,e){null!=this.pinsRegistry[i]&&this.pinsRegistry[i].show(e)},pinShowOne:function(i,e){this.pinHideAll(),this.pinShow(i,e)},pinHide:function(i){null!=this.pinsRegistry[i]&&this.pinsRegistry[i].hide()},pinHideAll:function(){$.each(semapps.buildings,function(i){semapps.schema.pinHide(i)})}});
//# sourceMappingURL=semapps-map-gv.min.js.map
