"use strict";Polymer({is:"semapps-schema",properties:{route:{type:Object,observer:"_routeChanged"},pins:{type:Array,value:[]},pinsRegistry:{type:Object,value:{}}},_routeChanged:function(){this.updateVisibility()},attached:function(){this.ready=!1,this.$gvMap=$(document.getElementById("gv-map")),this.$mapZones=this.$gvMap.find(".mapZone"),this.hoverActive=!0,semapps.schema=this,SemAppsCarto.ready(this.start.bind(this))},start:function(){var i=this,t=[];$.each(semapps.buildings,function(i){t.push(i)}),this.pins=t,this.$mapZones.on("mouseover",function(t){i.hoverActive&&i.buildingHighlight(t.currentTarget.getAttribute("id").split("-")[1])}).on("mouseout",function(t){i.hoverActive&&i.buildingHighlightOff(t.currentTarget.getAttribute("id").split("-")[1])}).on("click",function(t){var e=t.currentTarget.getAttribute("id").split("-")[1];i.buildingClick(e),i.hoverActive=!1,semapps.scrollToContent(function(){i.hoverActive=!0})}),this.buildingSelect(semapps.buildingSelected,!1)},buildingHighlight:function(i){this.buildingHighlightOff(),this.mapIsOver=!0,this.buildingHighlighted=i;var t=this.zoneGet(this.buildingHighlighted);t?(t.classList.add("strong"),t.classList.remove("discreet"),this.buildingHideAll(!0)):this.buildingHideAll(!1)},buildingHighlightOff:function(){var i=this;this.buildingHighlighted&&(this.zoneGet(this.buildingHighlighted).classList.remove("strong"),delete this.buildingHighlighted),this.mapTimeout&&clearTimeout(this.mapTimeout),this.mapIsOver=!1,this.mapTimeout=setTimeout(function(){i.mapIsOver||i.buildingHighlightReset()},500)},buildingHighlightReset:function(){this.mapTimeout=!1,this.buildingHideAll(!1)},buildingHideAll:function(i){var t=i?"add":"remove";this.$mapZones.each(function(i,e){e.classList[t]("discreet")})},buildingClick:function(i){semapps.domSearchTextInput.value="",semapps.schema.buildingSelect(i)},buildingSelect:function(i,t){this.pinsRegistry[semapps.buildingSelected]&&this.pinsRegistry[semapps.buildingSelected].deselect();var e=semapps.buildingSelected=i||semapps.buildingSelectedAll;this.pinsRegistry[e]&&this.pinsRegistry[e].select(),!1!==t&&semapps.goSearch()},zoneGet:function(i){return document.getElementById("mapZone-"+i)},pinShow:function(i,t){null!=this.pinsRegistry[i]&&this.pinsRegistry[i].show(t)},pinShowOne:function(i,t){this.pinHideAll(),this.pinShow(i,t)},pinHide:function(i){null!=this.pinsRegistry[i]&&this.pinsRegistry[i].hide()},pinHideAll:function(){$.each(semapps.buildings,function(i){semapps.schema.pinHide(i)})}});
//# sourceMappingURL=semapps-schema.min.js.map
