'use strict';window.log=c=>{console.debug(c)};var b=[];window.SemAppsCarto=class{constructor(c){log(c),window.semapps=this,this.baseUrl='/',this.myRoute=window.location.pathname.replace(/\//g,''),this.mainComponent=c,this.$window=$(window),this.detailAddress=[],this.entities={'http://virtual-assembly.org/pair#Organization':{name:'Organisation',plural:'Organisations',icon:'tower',markerColor:'#01acdd'},'http://virtual-assembly.org/pair#Person':{name:'Personne',plural:'Personnes',icon:'user',markerColor:'#28ccfb'},'http://virtual-assembly.org/pair#Project':{name:'Projet',plural:'Projets',icon:'screenshot',markerColor:'#FF4351'},'http://virtual-assembly.org/pair#Event':{name:'Ev\xE8nement',plural:'Ev\xE8nements',icon:'calendar',markerColor:'#FF667a'},'http://virtual-assembly.org/pair#Proposal':{name:'Proposition',plural:'Propositions',icon:'info-sign',markerColor:'#7b72e9'},'http://virtual-assembly.org/pair#Document':{name:'Document',plural:'Documents',icon:'folder-open',markerColor:'#a4de37'},'urn://semapps/thesaurus/documenttype':{name:'Type de document',plural:'Types de document',icon:'pushpin',markerColor:'#a4de37'},'urn://semapps/thesaurus/projecttype':{name:'Type de projet',plural:'Types de projets',icon:'pushpin',markerColor:'#FF4351'},'urn://semapps/thesaurus/eventtype':{name:'Type d\'\xE9v\xE9nement',plural:'Types d\'\xE9v\xE9nements',icon:'pushpin',markerColor:'#FF667a'},'urn://semapps/thesaurus/proposaltype':{name:'Type de proposition',plural:'Types de propositions',icon:'pushpin',markerColor:'#7b72e9'},'urn://semapps/thesaurus/organizationtype':{name:'Type d\'organisation',plural:'Types d\'organisations',icon:'pushpin',markerColor:'#01acdd'},'http://assemblee-virtuelle.github.io/grands-voisins-v2/thesaurus.ttl':{name:'Type d\'organisation',plural:'Types d\'organisations',icon:'pushpin',markerColor:'#838e91'}};var d=()=>{this.ajax('webservice/parameters',f=>{f&&f.responseJSON&&f.responseJSON.no_internet?(this.baseUrl='/fake_service/',d()):this.start(f.responseJSON)})};d()}ajax(c,d){$.ajax({url:this.baseUrl+c,complete:d})}ajaxMultiple(c,d){'use strict';var f=0,g={},h=this;for(var j in c)f++,this.ajax(c[j],function(k){return function(l){f--,g[k]=JSON.parse(l.responseText),0==f&&d.call(h,g)}}(j))}start(c){'use strict';$.extend(this,c),$.each(this.entities,function(g){semapps.typeToName.hasOwnProperty(g)?(semapps.entities[g].nameType=semapps.typeToName[g],semapps.entities[g].type=g):(semapps.entities[g].nameType=semapps.graphToName[g],semapps.entities[g].type='http://www.w3.org/2004/02/skos/core#Concept')}),this.domSearchTextInput=this.domId('searchText'),this.isReady=!0;let d=this.mainComponent.get('route.path').split('/'),f=2<=d.length&&('rechercher'===d[1]||''===d[1]);for(let g in f&&d[2]&&(this.domSearchTextInput.value=d[2]),b)b[g]();f&&this.goSearch()}goSearch(){let c=this.domSearchTextInput.value,d='/rechercher';d+=c?'/'+c:'',document.location.pathname===d?this.results.search(c,''):this.goToPath(d)}scrollToContent(c){this.$window.scrollTo($('#pageContent').offset().top-150,{duration:1e3,easing:'easeOutQuad',complete:c})}listen(c,d,f){if(Array.isArray(d)){for(let g in d)this.listen(c,d[g],f);return}return this.domId(c).addEventListener(d,f)}domId(c){return document.getElementById(c)}dom(c){return document.querySelectorAll(c)}goToPath(c,d){this.myRoute=c,semapps.mainComponent.set('queryParams',d),semapps.mainComponent.set('route.path',c)}imageOrFallback(c,d){'use strict';return!c&&semapps.entities.hasOwnProperty(d)?'/common/images/result-no_picture-'+semapps.entities[d].nameType+'.png':c}haveName(){return''!==this.user.name}isSuperAdmin(){return'super_admin'===this.user.access}isAdmin(){return'admin'===this.user.access||this.isSuperAdmin()}isMember(){return'member'===this.user.access||this.isAdmin()}isAnonymous(){return!this.isMember()}capitalize(c,d){return(d?c.toLowerCase():c).replace(/(?:^|\s)\S/g,function(f){return f.toUpperCase()})}initElementGlobals(c){$.extend(c,{isAnonymous:this.isAnonymous(),isMember:this.isMember(),isAdmin:this.isAdmin(),isSuperAdmin:this.isSuperAdmin(),haveName:this.haveName()})}realLink(c){c.preventDefault(),window.location.replace(c.currentTarget.getAttribute('href'))}getAddressToCreatePoint(c,d,f,g){$.ajax({url:'http://api-adresse.data.gouv.fr/search/',data:'q='+c,success:function(h){semapps.map.addPin(h.features[0].geometry.coordinates[1],h.features[0].geometry.coordinates[0],g,d,f),semapps.detailAddress[c]=h}})}},window.SemAppsCarto.ready=function(c){window.semapps&&window.semapps.isReady?c():b.push(c)}
//# sourceMappingURL=main.min.js.map
